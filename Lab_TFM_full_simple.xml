<?xml version="1.0" encoding="UTF-8"?>

<!--
~~~~~~~~~~~~~~~~~~~~
VNX SD-WAN SCENARIO - AMURACCIOLE - TFM
~~~~~~~~~~~~~~~~~~~~
Name:        SD-WAN_TFM
Description:  
!!!!!!!!!!!ESCENARIO DE TFM: SD-WAN!!!!!!!!!!!!!!!

MASTER UIVERSITARIO EN INGENIERIA DE REDES Y SERVICIOS TELEMATICOS
Universidad Politecnica de Madrid
SPAIN

-->

<vnx xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="/usr/share/xml/vnx/vnx-2.00.xsd">
  <global>
    <version>2.0</version>
    <scenario_name>Escenario_TFM_Andres_Muracciole</scenario_name>
    <automac offset="5"/>
    <vm_mgmt type="none" />     
    <vm_defaults>
	    <console id="0" display="no"/>
	    <console id="1" display="yes"/>
    </vm_defaults>
  </global>

  <net name="Net1" mode="virtual_bridge" />
  <net name="Net2" mode="virtual_bridge" />

  <net name="CONM_A" mode="openvswitch" hwaddr="00:00:00:00:0A:00" controller="tcp:127.0.0.1:6633" of_version="OpenFlow13" fail_mode="secure" >
   <connection name='A-C' net='CONM_C'> </connection>
   <connection name='A-H1' net='Net1'> </connection>
  </net>
  <net name="CONM_B" mode="openvswitch" hwaddr="00:00:00:00:0B:00" controller="tcp:127.0.0.1:6633" of_version="OpenFlow13" fail_mode="secure" >
   <connection name='A-B' net='CONM_A'> </connection>
   <connection name='B-D' net='CONM_D'> </connection>
  </net>
  <net name="CONM_C" mode="openvswitch" hwaddr="00:00:00:00:0C:00" controller="tcp:127.0.0.1:6633" of_version="OpenFlow13" fail_mode="secure" >
  </net>
  <net name="CONM_D" mode="openvswitch" hwaddr="00:00:00:00:0D:00" controller="tcp:127.0.0.1:6633" of_version="OpenFlow13" fail_mode="secure" >
   <connection name='D-E' net='CONM_E'> </connection>
  </net>
  <net name="CONM_E" mode="openvswitch" hwaddr="00:00:00:00:0E:00" controller="tcp:127.0.0.1:6633" of_version="OpenFlow13" fail_mode="secure" >
  <connection name='E-C' net='CONM_C'> </connection>
  <connection name='E-H2' net='Net2'> </connection>
  </net>

  <!-- NODES -->
  <vm name="h01" type="lxc" arch="x86_64">
    <filesystem type="cow">/usr/share/vnx/filesystems/rootfs_lxc_ubuntu64</filesystem>
    <mem>512M</mem>
    <if id="1" net="Net1">
      <mac>00:00:00:00:01:01</mac>
      <ipv4>10.1.1.1/24</ipv4>
      <ipv6>2001:db8:0:1:200:ff:fe00:101/64</ipv6>
    </if>
    <!--<route type="ipv4" gw="10.1.1.1">default</route>
    <route type="ipv6" gw="2001:db8:0:1:200:ff:fe00:601">default</route>-->
  </vm>
    
  <vm name="h02" type="lxc" arch="x86_64">
    <filesystem type="cow">/usr/share/vnx/filesystems/rootfs_lxc_ubuntu64</filesystem>
    <if id="1" net="Net2" >
      <mac>00:00:00:00:02:01</mac>
      <ipv4>10.1.1.2/24</ipv4>
      <ipv6>2001:db8:0:5:200:ff:fe00:201/64</ipv6>
    </if>
    <!--<route type="ipv4" gw="10.1.5.1">default</route>
    <route type="ipv6" gw="2001:db8:0:5:200:ff:fe00:701">default</route>-->
  </vm>
   
</vnx>
